# これは何？

箱庭の時刻同期機能について、定量評価を行う。

# 目的

箱庭コア機能が、箱庭時刻同期の定義に従い、シミュレーションにおける時刻同期を適切に行っていることを確認する。複数の箱庭アセットがシミュレーション内で時刻同期されている際、最大許容遅延時間やアセット数を変化させた場合の挙動を測定し、定義通りの動作を検証する。

特に以下の2点を確認する。

* 時刻同期の精度：箱庭時刻と各箱庭アセット時刻の差が定義された最大許容時間範囲内に収まっているか。
* シミュレーションの実行速度：アセット数の増加や最大許容遅延時間によるシミュレーション速度の変化が想定通りか。

---

# 測定内容

箱庭時刻同期の定義に基づき、箱庭コア時刻と各アセットの時刻が許容範囲内で同期しているかを確認する。さらに、最大許容遅延時間やアセット数の変化による挙動も評価する。

**測定項目**:
1. **箱庭時刻とアセット時刻の差**：箱庭コア時刻と各アセットの時刻が定義された最大許容遅延時間内に収まっているかを確認する。
2. **シミュレーション実行時間**：アセット数や最大許容遅延時間の変化に伴うシミュレーション実行時間の変化を測定する。

**パラメータ設定**:
- ステップ時間：10msec
- ステップ数：1,000ステップ（合計シミュレーション時間10秒）

**可変パラメータ**:
- 最大許容遅延時間：10msec, 20msec, 40msec, 80msec, 100msec
- 箱庭アセット数：1, 2, 4, 8, 10

**測定方法**:
1. 各パラメータ設定において、箱庭時刻と各アセット時刻の差を記録し、最大許容遅延時間内に収まっているかを確認する。
2. 各シミュレーションの総実行時間を計測し、並行動作の効率を評価する。

---

# 測定条件と測定項目

## 測定条件

- サンプル数：10件
- 箱庭アセット：Python版の箱庭アセットを使用
- 箱庭アセットの処理内容：1ステップ毎に10,000回ビジーループを実行

## 測定項目

- 箱庭時刻および各アセットの時刻
- 箱庭時刻 - 箱庭アセット時刻の平均値
- 箱庭時刻 - 箱庭アセット時刻の標準偏差

---

# 測定環境

- M2 MacBook Pro

---

# 期待値

以下の期待値を設定する。

1. **箱庭時刻 - 箱庭アセット時刻の平均値**  
   箱庭アセットの時刻が箱庭コア時刻と同期している場合、平均値は「0」に近くなる。最大許容遅延時間の範囲内であれば、アセット数や遅延時間が増加しても、平均値は大きく逸脱しない。

   **期待値**:  
   - 各パラメータ設定において、箱庭時刻とアセット時刻の差は最大許容遅延時間以下であること。
   - アセット数が増加すると若干の遅延が発生するが、最大許容遅延時間内であること。

2. **箱庭時刻 - 箱庭アセット時刻の標準偏差**  
   箱庭時刻同期の精度が高い場合、各アセット時刻間のばらつき（標準偏差）は小さくなる。特に最大許容遅延時間が小さい設定では、標準偏差が小さくなる。一方、許容遅延時間が大きい設定では標準偏差が大きくなるが、並行動作の効率は向上する。

   **期待値**:  
   - 最大許容遅延時間が小さい場合、標準偏差は小さい。
   - アセット数が増えると標準偏差は増加するが、箱庭時刻同期の許容範囲内に収まる。
   - 最大許容遅延時間が大きい場合、標準偏差は大きくなるが、並行動作の効率は保たれる。

---

# 評価基準

以下の2点を確認する。

- 基準1. 箱庭時刻とアセット時刻の差が、最大許容遅延時間内に収まっているか
- 基準2. アセット数と最大許容遅延時間の変動によって、シミュレーションの実行速度と時刻のバラつきが想定通りであるか

---

# 測定結果

## 基準1に対する結果



## 基準2に対する結果

# 評価

TODO

# 環境構築手順

TODO

# 測定手順

TODO
